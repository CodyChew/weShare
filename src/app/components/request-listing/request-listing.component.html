<div *ngIf="this.requestDetails && this.creatorDetails">

  <!-- request card -->
  <!-- <div id="req-card" class="req-card" style="margin:1em;" data-toggle="modal" data-target="#request-details-modal"> -->
    <!-- <div id="req-card" class="req-card" style="margin:0.5em;" (click)="openDetailsModal()"> -->
  <div id="req-card" class="req-card" style="margin:0.5em;" (click)="open(requestDetailModal)">
    <div id="header" style="display:flex">
      <div class="req-title"> {{this.requestDetails['title']}}</div>
      <div style="width:30%; display: flex; justify-content:center;">
        <div *ngIf="this.requestDetails['status'] == 'active'" class="req-progress progress-active"> active </div>
        <div *ngIf="this.requestDetails['status'] == 'ongoing'" class="req-progress progress-ongoing"> ongoing </div>
        <div *ngIf="this.requestDetails['status'] == 'completed'" class="req-progress progress-completed"> done </div>
        <div *ngIf="this.requestDetails['status'] == 'expired'" class="req-progress progress-expired"> expired </div>
      </div>

    </div>


    <div class="req-desc word-break">
        {{this.requestDetails['description']}}
    </div>

    <div id="time-ago" class="req-side-desc">
        <img src="{{this.creatorDetails['profileImg']}}" class="image-holder" style="width: 2em;height: 2em; margin: 0em 0.5em; " >
        {{this.creatorDetails["displayName"]}} / {{this.timeAgo(this.requestDetails['timeStamp'])}}
    </div>

  </div>

  <!-- request details modal -->
  <ng-template #requestDetailModal let-modal>
    <div class="request-detail-modal">

        <!-- header -->
        <div class="modal-header req-modal-header" *ngIf="this.requestDetails && this.creatorDetails">
          {{ this.requestDetails["title"] }}
          <button type="button" class="close" style="padding:0em;margin:0em;" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body req-modal-body" style="padding:0em 0.5em;">

          <!-- creator details -->
          <div id="creator-details" style="display:flex;padding: 1.5em 0.5em 0em;">
            <div id="image-area" style="display:flex; align-items:center; justify-content:center; width:15%;">
              <img src="{{this.creatorDetails['profileImg']}}" class="image-holder" style="width: 3em;height: 3em;" >
            </div>

            <div id="username-and-time" style="padding:0em 1em; width:55%;">
              <div style="font-size:1.5em;">{{ this.creatorDetails["displayName"] }}</div>
              <div style="font-size:0.9em; color:grey;"> {{this.timeAgo(this.requestDetails['timeStamp'])}} </div>
            </div>

            <div style="width:30%; display: flex; justify-content:center;">
              <div *ngIf="this.requestDetails['status'] == 'active'" class="req-progress progress-active"> active </div>
              <div *ngIf="this.requestDetails['status'] == 'ongoing'" class="req-progress progress-ongoing"> ongoing </div>
              <div *ngIf="this.requestDetails['status'] == 'completed'" class="req-progress progress-completed"> done </div>
              <div *ngIf="this.requestDetails['status'] == 'expired'" class="req-progress progress-expired"> expired </div>
            </div>

          </div>

          <!-- creator additional details -->
          <div id="creator-add-details" style="display:flex;">
            <div id="room-details" class="req-modal-item " style="width:50%;">
              <i class="fa fa-home" aria-hidden="true" style="padding-right:0.5em;"></i> {{ this.creatorDetails["roomDetails"] }}
            </div>

            <div id="contact-details" class="req-modal-item " style="width:50%;">
              <i class="fa fa-phone" aria-hidden="true" style="padding-right:0.5em;"></i> {{this.creatorDetails["userContact"] }}
            </div>

          </div>

          <!-- description -->
          <div id="description" class="req-modal-item item-top-border">
            {{ this.requestDetails["description"] }}
          </div>



          <!-- urgency and duration -->
          <div id="urgency-and-duration" style="display:flex;">
            <div id="urgency" class="req-modal-item" style="width:50%;">
              Urgency: {{ this.requestDetails["urgency"] }}
            </div>

            <div id="duration" class="req-modal-item" style="width:50%;">
              <i class="fa fa-clock-o" aria-hidden="true" style="padding-right:0.5em;"></i>
              {{ this.requestDetails["duration"] }}
            </div>
          </div>


          <!-- rewards -->
          <div id="incentive" class="req-modal-item item-top-border">
            <i class="fa fa-usd" aria-hidden="true"></i> {{ this.requestDetails["incentive"] }}
          </div>

          <!-- helper -->
          <div id="helper-details" class="req-modal-item item-top-border" >
            <div *ngIf="this.helperDetails" style="display:flex;padding:0.5em 0em;">

              <div id="image-area" style="display:flex; align-items:center; justify-content:center">
                <img src="{{this.helperDetails['profileImg']}}" class="image-holder" style="width: 2em;height: 2em;" >
              </div>
              <div id="helper-desc" style="padding-left:0.5em;">
                <span style="font-weight: bold;">{{ this.helperDetails["displayName"] }}</span>
                decided to help at {{this.datetime12H(this.requestDetails["helpTimeStamp"])}} ({{this.timeAgo(this.requestDetails["helpTimeStamp"])}}).
              </div>

            </div>

            <div *ngIf="!this.helperDetails">No one has helped {{this.creatorDetails["displayName"]}} yet. Be the first to help!</div>
          </div>

        </div>

        <div class="modal-footer req-modal-footer">
          <div id="possible-actions" *ngIf="this.userID != this.creatorDetails['uid']" style="display:flex;">

            <!-- start helping -->
            <div *ngIf="this.requestDetails['status'] == 'active'" class="main-button" (click)="acceptRequest()">
              Help {{ this.creatorDetails['displayName'] }}!
            </div>

            <!-- give up or complete -->
            <div *ngIf="this.requestDetails['status'] == 'ongoing' && this.requestDetails['helper'] == this.userID"
            class="main-button" style="margin:0em 0.3em;" (click)="unacceptRequest()">
              Give up
            </div>

            <div *ngIf="this.requestDetails['status'] == 'ongoing' &&this.requestDetails['helper'] == this.userID"
            class="main-button" style="margin:0em 0.3em;" (click)="completeRequest()">
              I've finished!
            </div>


          </div>
        </div>
    </div>
</ng-template>


</div>

